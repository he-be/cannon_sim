Browser Artillery 要件定義書 (ユーザーストーリー)

1. はじめに (Introduction)
   本ドキュメントは、Webブラウザ向けリアルタイム砲撃シミュレーションゲーム「Browser Artillery」の要件を、アジャイル開発で用いられるユーザーストーリー形式で定義するものです。

- プロジェクト名: Browser Artillery
- 対象ペルソナ: プレイヤー (Player)
- 開発言語: TypeScript

2. 全体的なゲームフロー (General Game Flow)

ストーリー ID
ユーザーストーリー
GF-01
プレイヤーとして、 ゲーム体験を始めるために、タイトル画面からゲームを開始したい。
GF-02
プレイヤーとして、 異なる難易度に挑戦するために、ステージセレクト画面でプレイするステージを選択したい。
GF-03
プレイヤーとして、 次の挑戦を選ぶために、ステージクリア後にステージセレクト画面へ戻りたい。
GF-04
プレイヤーとして、 再挑戦したり別のステージを選んだりするために、ゲームオーバーになったらステージセレクト画面へ戻りたい。3. 画面仕様 (UI/UX)
3.1. タイトル & ステージセレクト画面 (Title & Stage Select Screen)
ストーリー ID
ユーザーストーリー
UI-01
プレイヤーとして、 何のゲームか、どう始めればいいかを知るために、タイトル画面でゲームタイトルと「START」ボタンを確認したい。
UI-02
プレイヤーとして、 希望の難易度を選ぶために、ステージセレクト画面で3つのステージ（静止目標/動目標(低速)/動目標(高速)）を選択したい。
UI-03
プレイヤーとして、 シミュレーションに没頭するために、CRTレーダーや艦船コンソールを模したUIデザイン（黒地に緑、グレー地に白黒のボタンなど）であってほしい。
3.2. ゲーム画面レイアウト (Game Screen Layout)
ストーリー ID
ユーザーストーリー
UI-04
プレイヤーとして、 必要な情報と操作に一度にアクセスするために、ゲーム画面が3つの領域（左：コントロールパネル、中央：水平レーダー、右：垂直レーダー&ターゲット情報）に分割されていてほしい。
3.3. コントロールパネル (Control Panel - 左ペイン)
ストーリー ID
ユーザーストーリー
UI-05
プレイヤーとして、 正確に照準を合わせるために、スライダーで砲の「方位角(Azimuth)」と「仰角(Elevation)」を調整・確認したい。
UI-06
プレイヤーとして、 移動目標を効果的に狙うために、計算された推奨照準角の「方位角」と「仰角」（リード角）を確認したい。
UI-07
プレイヤーとして、 砲撃するために、「発射(FIRE)」ボタンを押したい。
UI-08
プレイヤーとして、 目標を切り替えたり追跡を停止したりするために、現在のロックオンを解除するボタンがほしい。
UI-09
プレイヤーとして、 経過時間を把握するために、ゲーム内時計(IGT)を確認したい。
UI-10
プレイヤーとして、（将来の拡張のために）兵器の性能を把握するために、現在選択されている弾頭の種類と初速を確認したい。
3.4. 水平レーダー (Horizontal Radar - 中央ペイン)
ストーリー ID
ユーザーストーリー
UI-11
プレイヤーとして、 戦況を把握するために、自軍砲台が中心下部に固定されたトップダウンのレーダー画面を見たい。
UI-12
プレイヤーとして、 正確なターゲティングを行うために、レーダー中心線と、マウスで動かせる距離カーソルを使って目標を捉えたい。
UI-13
プレイヤーとして、 現在の照準でどこに着弾するかを視覚的に知るために、リアルタイムで更新される弾道予測線をレーダー上で確認したい。
UI-13-2
プレイヤーとして、 発射した砲弾の飛翔状況をリアルタイムで確認するために、水平レーダー上に実砲弾の現在位置を動くシンボルで表示してほしい。
UI-14
プレイヤーとして、 レーダーがどこを向いているかを知るために、現在のレーダーの方位角と仰角を数値で確認したい。
3.5. 垂直レーダー & ターゲット情報 (Vertical Radar & Target Info - 右ペイン)
ストーリー ID
ユーザーストーリー
UI-15
プレイヤーとして、 高低差を把握するために、地面、自砲、目標の高度関係がわかるサイドビューの垂直マップを見たい。
UI-16
プレイヤーとして、 砲弾の飛翔経路を立体的にイメージするために、垂直マップ上に放物線で表示される弾道予測を確認したい。
UI-16-2
プレイヤーとして、 発射した砲弾の垂直方向の飛翔状況を確認するために、垂直マップ上に実砲弾の現在位置を動くシンボルで表示してほしい。
UI-17
プレイヤーとして、 ターゲティングの状態を明確に知るために、「NO TARGET」「TRACKING」「LOCKED ON」といったロックオンステータスを確認したい。
UI-18
プレイヤーとして、 精密な射撃の意思決定を行うために、ロックオン中の目標に関する詳細情報（種別、距離、速度、高度）を確認したい。4. ゲームシステム (Game System)
4.1. 砲撃シミュレーション (Artillery Simulation)
ストーリー ID
ユーザーストーリー
GS-01
プレイヤーとして、 挑戦的で本格的なシミュレーションを体験するために、砲弾の弾道がリアルな物理法則（重力、空気抵抗、コリオリ力）に基づいて計算されてほしい。
GS-02
プレイヤーとして、 練習と反復によってスキルを向上させるために、シミュレーションにランダム要素がなく、同じ条件では必ず同じ結果になってほしい。
GS-02-2
プレイヤーとして、 発射の結果を視覚的に確認するために、砲弾を発射した後にその砲弾が実際に飛翔する様子をレーダー上で動くシンボルとして見たい。
GS-02-3
プレイヤーとして、 砲弾の軌跡を理解するために、飛翔した砲弾の経路が薄い軌跡線として一定時間表示されてほしい。
4.2. 照準とロックオン (Targeting and Lock-On)
ストーリー ID
ユーザーストーリー
GS-03
プレイヤーとして、 目標を捜索するために、水平レーダー上をマウスドラッグしてレーダーを走査したい。
GS-04
プレイヤーとして、 目標の距離を合わせるために、レーダー中心線と距離カーソルを目標のシンボルに重ねたい。
GS-05
プレイヤーとして、 システムに目標を自動追尾させるために、カーソルが合った状態で右クリックしてターゲットをロックオンしたい。
GS-06
プレイヤーとして、 照準操作に集中するために、一度ロックオンした目標は、撃破するか解除するまでレーダーが自動で追尾し続けてほしい。
注記: レーダー操作はゲームの核となる要素であり、その実装には以下の技術的要件が含まれます。これらはプレイヤー体験の裏付けとなるシステム側の視点です。
要件 ID
技術要件
GS-T01
システムとして、 マウスの水平ドラッグ量をレーダーの方位角(Azimuth)の変動にマッピングし、リアルタイムにレーダー表示を更新する。
GS-T02
システムとして、 マウスの垂直ドラッグ量またはマウスホイールのスクロール量をレーダーの距離カーソルの位置にマッピングする。
GS-T03
システムとして、 レーダー中心線と距離カーソルの交点が目標の当たり判定と重なった際に、目標を「TRACKING」状態として視覚的にハイライトする。
GS-T04
システムとして、 「TRACKING」状態の目標上で右クリックが検知された場合、その目標を「LOCKED ON」状態に遷移させる。
GS-T05
システムとして、 「LOCKED ON」状態では、目標の座標を追跡し、レーダーの方位角と距離カーソルを自動で更新し続ける。
4.3. リード角計算 (Lead Calculation)
ストーリー ID
ユーザーストーリー
GS-07
プレイヤーとして、 移動目標を撃つ際の照準の参考にするために、システムに砲弾が目標に命中するための推奨照準角（リード角）を自動で計算し、コントロールパネルに表示してほしい。
4.4. 命中と撃破 (Hit Detection and Destruction)
ストーリー ID
ユーザーストーリー
GS-08
プレイヤーとして、 成功したフィードバックを得るために、砲弾が目標に命中したら、爆発などの撃破エフェクトが見たい。
GS-09
プレイヤーとして、 戦果を明確に知るために、撃破された目標がマップから消えてほしい。
4.5. ゲームオーバー (Game Over)
ストーリー ID
ユーザーストーリー
GS-10
プレイヤーとして、 ミッションの失敗を理解するために、目標が自陣に到達したら、爆撃演出と共にゲームオーバーになってほしい。5. 技術要件 (Technical Requirements)
ストーリー ID
ペルソナ
ユーザーストーリー
TR-01
開発者として、
静的型付けによる品質と保守性の向上のために、プロジェクト全体をTypeScriptで開発したい。
TR-02
開発者として、
外部ライブラリに依存せず、自由度の高い描画制御を行うために、すべてのゲーム要素の描画にHTML5 Canvas 2D APIを使用したい。
TR-03
開発者として、
シミュレーションロジックを完全に制御するために、砲弾の物理演算をライブラリを使わずにTypeScriptで実装したい。
TR-04
開発者として、
シミュレーションの一貫性と再現性を保証するために、物理演算を描画ループ（requestAnimationFrame）とは独立した固定タイムステップで実行したい。
